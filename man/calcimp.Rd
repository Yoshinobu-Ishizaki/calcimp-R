% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/calcimp.R
\name{calcimp}
\alias{calcimp}
\title{Calculate Input Impedance of Wind Instrument Tubes}
\usage{
calcimp(
  filename,
  max_freq = 2000,
  step_freq = 2.5,
  temperature = 24,
  rad_calc = 1L,
  dump_calc = TRUE,
  sec_var_calc = FALSE
)
}
\arguments{
\item{filename}{Character string. Path to the mensur file (.men or .xmen format)}

\item{max_freq}{Numeric. Maximum frequency in Hz (default: 2000.0)}

\item{step_freq}{Numeric. Frequency step in Hz (default: 2.5)}

\item{temperature}{Numeric. Temperature in Celsius (default: 24.0)}

\item{rad_calc}{Integer. Radiation impedance calculation mode:
\itemize{
\item 0 = NONE: No radiation impedance
\item 1 = PIPE: Pipe radiation (default)
\item 2 = BUFFLE: Baffled radiation
}}

\item{dump_calc}{Logical. Enable wall damping calculation (default: TRUE)}

\item{sec_var_calc}{Logical. Enable section variation calculation (default: FALSE).
This is experimental and may not be adequate.}
}
\value{
A data.frame with four columns:
\describe{
\item{freq}{Frequency in Hz}
\item{real}{Real part of impedance}
\item{imag}{Imaginary part of impedance}
\item{mag}{Magnitude in dB (10*log10(real^2 + imag^2))}
}
}
\description{
Calculate the input impedance of a wind instrument tube using acoustic
transmission theory. The tube geometry is specified in a mensur file
(either .men or .xmen format).
}
\details{
The function supports two mensur file formats:
\itemize{
\item \strong{XMENSUR format (.xmen)}: Python-style format with # comments,
brackets, and expressions. Recommended for new files.
\item \strong{ZMENSUR format (.men)}: CSV-based format with \% comments.
Supported for backward compatibility.
}

The file format is automatically detected from the file extension.
}
\examples{
\dontrun{
# Calculate impedance for a test instrument
result <- calcimp("sample/test.men")
plot(result$freq, result$mag, type="l", xlab="Frequency (Hz)", ylab="Magnitude (dB)")

# With custom parameters
result <- calcimp("sample/trumpet.xmen",
                  max_freq = 3000,
                  step_freq = 5,
                  temperature = 20,
                  rad_calc = 1,
                  dump_calc = TRUE)
}

}
